<!DOCTYPE HTML>
<html lang="id" class="light" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>OOP - Rust Note</title>


        <!-- Custom HTML head -->
        
        <meta name="description" content="Rust dalam Bahasa Indonesia">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="../favicon.svg">
        <link rel="shortcut icon" href="../favicon.png">
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
        <link rel="stylesheet" href="../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../highlight.css">
        <link rel="stylesheet" href="../tomorrow-night.css">
        <link rel="stylesheet" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->

    </head>
    <body class="sidebar-visible no-js">
    <div id="body-container">
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('light')
            html.classList.add(theme);
            var body = document.querySelector('body');
            body.classList.remove('no-js')
            body.classList.add('js');
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var body = document.querySelector('body');
            var sidebar = null;
            var sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            sidebar_toggle.checked = sidebar === 'visible';
            body.classList.remove('sidebar-visible');
            body.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><a href="../rust_id.html">Rust ID</a></li><li class="chapter-item expanded affix "><a href="../0_pengenalan.html">Pengenalan</a></li><li class="chapter-item expanded "><a href="../basic/0_basic.html"><strong aria-hidden="true">1.</strong> Basics</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../basic/1_instalasi.html"><strong aria-hidden="true">1.1.</strong> Instalasi</a></li><li class="chapter-item expanded "><a href="../basic/2_toolchain.html"><strong aria-hidden="true">1.2.</strong> Toolchain</a></li><li class="chapter-item expanded "><a href="../basic/3_hello_world.html"><strong aria-hidden="true">1.3.</strong> Hello World!</a></li><li class="chapter-item expanded "><a href="../basic/4_struktur_codebase.html"><strong aria-hidden="true">1.4.</strong> Struktur Codebase</a></li><li class="chapter-item expanded "><a href="../basic/5_komponen_codebase.html"><strong aria-hidden="true">1.5.</strong> Komponen Codebase</a></li><li class="chapter-item expanded "><a href="../basic/6_primitive_types.html"><strong aria-hidden="true">1.6.</strong> Primitive Types</a></li><li class="chapter-item expanded "><a href="../basic/7_string_types.html"><strong aria-hidden="true">1.7.</strong> String Types</a></li><li class="chapter-item expanded "><a href="../basic/8_compound_types.html"><strong aria-hidden="true">1.8.</strong> Compound Types</a></li><li class="chapter-item expanded "><a href="../basic/9_algebraic_types.html"><strong aria-hidden="true">1.9.</strong> Algebraic Types</a></li><li class="chapter-item expanded "><a href="../basic/10_collection_types.html"><strong aria-hidden="true">1.10.</strong> Collection Types</a></li><li class="chapter-item expanded "><a href="../basic/11_control_flow.html"><strong aria-hidden="true">1.11.</strong> Control Flow</a></li><li class="chapter-item expanded "><a href="../basic/12_ownership_and_borrowing.html"><strong aria-hidden="true">1.12.</strong> Ownership and Borrowing</a></li><li class="chapter-item expanded "><a href="../basic/13_associated_items.html"><strong aria-hidden="true">1.13.</strong> Associated Items</a></li><li class="chapter-item expanded "><a href="../basic/14_trait.html"><strong aria-hidden="true">1.14.</strong> Trait</a></li><li class="chapter-item expanded "><a href="../basic/15_generic.html"><strong aria-hidden="true">1.15.</strong> Generic</a></li><li class="chapter-item expanded "><a href="../basic/16_generics_trait_bounds.html"><strong aria-hidden="true">1.16.</strong> Generics Trait Bounds</a></li><li class="chapter-item expanded "><a href="../basic/17_lifetime.html"><strong aria-hidden="true">1.17.</strong> Lifetime</a></li><li class="chapter-item expanded "><a href="../basic/18_error_handling.html"><strong aria-hidden="true">1.18.</strong> Error Handling</a></li><li class="chapter-item expanded "><a href="../basic/19_unit_test.html"><strong aria-hidden="true">1.19.</strong> Unit Test</a></li><li class="chapter-item expanded "><a href="../basic/20_cargo_dan_konfigurasi.html"><strong aria-hidden="true">1.20.</strong> Cargo dan Konfigurasi</a></li></ol></li><li class="chapter-item expanded "><a href="../intermediate/0_intermediate.html"><strong aria-hidden="true">2.</strong> Intermediate</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../intermediate/1_functional_programming.html"><strong aria-hidden="true">2.1.</strong> Functional Programming</a></li><li class="chapter-item expanded "><a href="../intermediate/2_fp_rust.html"><strong aria-hidden="true">2.2.</strong> Functional Programming pada Rust</a></li><li class="chapter-item expanded "><a href="../intermediate/3_iterator.html"><strong aria-hidden="true">2.3.</strong> Iterator</a></li><li class="chapter-item expanded "><a href="../intermediate/4_zero-cost_abstraction.html"><strong aria-hidden="true">2.4.</strong> Zero-cost Abstraction</a></li><li class="chapter-item expanded "><a href="../intermediate/5_smart_pointers.html"><strong aria-hidden="true">2.5.</strong> Smart Pointers</a></li><li class="chapter-item expanded "><a href="../intermediate/6_OOP.html" class="active"><strong aria-hidden="true">2.6.</strong> OOP</a></li><li class="chapter-item expanded "><a href="../intermediate/7_subtyping.html"><strong aria-hidden="true">2.7.</strong> Subtyping</a></li><li class="chapter-item expanded "><a href="../intermediate/8_standard_traits.html"><strong aria-hidden="true">2.8.</strong> Standard Traits</a></li><li class="chapter-item expanded "><div><strong aria-hidden="true">2.9.</strong> Conversion Traits</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">2.10.</strong> Operator Traits</div></li></ol></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <!-- Track and set sidebar scroll position -->
        <script>
            var sidebarScrollbox = document.querySelector('#sidebar .sidebar-scrollbox');
            sidebarScrollbox.addEventListener('click', function(e) {
                if (e.target.tagName === 'A') {
                    sessionStorage.setItem('sidebar-scroll', sidebarScrollbox.scrollTop);
                }
            }, { passive: true });
            var sidebarScrollTop = sessionStorage.getItem('sidebar-scroll');
            sessionStorage.removeItem('sidebar-scroll');
            if (sidebarScrollTop) {
                // preserve sidebar scroll position when navigating via links within sidebar
                sidebarScrollbox.scrollTop = sidebarScrollTop;
            } else {
                // scroll sidebar to current active section when navigating via "next/previous chapter" buttons
                var activeSection = document.querySelector('#sidebar .active');
                if (activeSection) {
                    activeSection.scrollIntoView({ block: 'center' });
                }
            }
        </script>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Rust Note</h1>

                    <div class="right-buttons">
                        <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="object-oriented-programming-in-rust"><a class="header" href="#object-oriented-programming-in-rust">Object Oriented Programming in Rust</a></h1>
<p>OOP memiliki banyak definisi seiring waktu. Bermula dari Simula yang mengenalkan konsep object, program disusun sedemikian rupa dari sekumpulan object-object yang dibangung dari class, attributes, dan virtual procedures(methods). Selanjutnya oleh Smalltalk menambahkan konsep message passing, dimana object akan menerima suatu <em>message</em> melalui method-method nya, dan menyesuaikan state berdasarkan itu. Java datang dengan konsep yang mirip-mirip dan dijadikan acuan dalam OOP yaitu memiliki:</p>
<ul>
<li>Encapsulation: Data dan Behaviours di-<em>wrap</em> menjadi satu dan interaksi terjadi melalui access modifier terhadap public methods mutating shared data.</li>
<li>Abstraction: Memodelkan komponen yang memiliki kesamaan dalam attributes/data dan behaviours/methods dan menyembunyikan implementation details.</li>
<li>Inheritance: Memberikan relasi antar komponen code dengan relasi &quot;is a&quot;. Digunakan untuk code reuse dan ekstensi attributes dan behaviours.</li>
<li>Polymorphism: Deklarasi common behaviour antar multiple objects. Diimplementasikan dengan menggunakan Vtable, dynamically checked.</li>
</ul>
<h2 id="encapsulation"><a class="header" href="#encapsulation">Encapsulation</a></h2>
<p>Pada Rust enkapsulasi bisa dicapai melalui associated items, yaitu ketika User-Defined Types(Struct &amp; Enum) memiliki fields/attributes dan <code>impl</code>.</p>
<p>Contoh:</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>pub Object struct {
    field1: String,
    field2: i32,
}

impl Object {
    pub fn method1(&amp;self) -&gt; String {
        // ...
    }

    pub fn method2(&amp;mut self) -&gt; String {
        // ...
    }

    pub fn method3(self) -&gt; String {
        // ...
    }
}
<span class="boring">}</span></code></pre></pre>
<p>Rust memiliki beberapa jenis access modifier di antaranya:</p>
<ul>
<li><code>pub</code> public membuat komponen/tipe dapat diakses di manapun dari manapun.</li>
<li><code>pub(in *path*)</code> public sesuai dengan <em>path</em> yang dideklarasikan.</li>
<li><code>pub(crate)</code> public hanya di dalam crate yang sama(current crate).</li>
<li><code>pub(super)</code> public hanya terhadap parent module. (kurleb mirip seperti protected pada Java) </li>
<li><code>pub(self)</code> public hanya di dalam module yang sama(current module), ini sama saja dengan private tanpa menggunakan keyword <code>pub</code>.</li>
</ul>
<p>Perbedaan enkapsulasi antara bahasa OOP umumnya(Java, C#, etc) dengan Rust adalah, pada kebanyakan bahasa OOP lainnya, object memiliki dynamic dispatch dan juga kadang late binding(runtime binding). Hal ini biasanya diimplementasikan melalui semacam &quot;informasi&quot; yang diembed pada runtime dan diakses pada saat program berjalan, biasanya disebut <em>vtable</em>. Pada Rust, associated items bersifat static dan compile-time binded(di tambah dengan sistem ownership dan borrow).</p>
<h2 id="abstraction"><a class="header" href="#abstraction">Abstraction</a></h2>
<p>Bisa dicapai dengan memanfaatkan:</p>
<ul>
<li>
<p>Module system pada rust, dengan menciptakan inner module for implementation details untuk public API/interfaces
Pada Rust bisa memanfaatkan access modifier seperti <code>pub</code>(public interfaces), <code>pub(self)</code>(private), <code>pub(crate)</code>(same crate only), <code>pub(super)</code>(protected).</p>
</li>
<li>
<p>Trait, dengan associated types untuk common attributes shared, dan default implementations untuk common behaviours shared, serta required methods untuk common behaviours with different implementations. Contoh: trait <a href="https://doc.rust-lang.org/std/iter/trait.Iterator.html">Iterator</a>.
Iterator adalah contoh abstraksi untuk tipe data collections seperti list, map, tree, dan lainnya.</p>
</li>
</ul>
<h2 id="inheritance"><a class="header" href="#inheritance">Inheritance</a></h2>
<p>Rust tidak memiliki inherintance layaknya kebanyakan bahasa OOP lainnya. Hal ini serupa dengan kebanyakan bahasa FP lainnya. Hal ini karena sifat strongly typed setiap tipe data pada Rust, dan juga implementasi Algebraic Data Types. Inherintance pada Rust bisa diganti dengan komposisi, atau memanfaatkan <code>trait</code>.</p>
<h2 id="polymorphism"><a class="header" href="#polymorphism">Polymorphism</a></h2>
<p>Bahasa seperti Java, memiliki beberapa jenis polymorfisme seperti methods overloading, methods overriding, coercions, subtyping dan parametric.</p>
<p>Di antara polimorfisme pada Rust:</p>
<ul>
<li>Operator overloading</li>
<li>Coercions: konversi tipe secara implisit seperti <code>let a: f32 = 123_i32 as f32;</code>, <code>&amp;mut T -&gt; &amp;T</code>, dll. (more)[https://doc.rust-lang.org/reference/type-coercions.html#coercion-types]</li>
<li>Lifetime polymorphism melalui lifetime behavioural subtyping(Liskov Substitution Principle)</li>
<li><code>std::any</code> &amp; function pointer, <em>dynamically typed</em> and procedural polymorphism. (Procedural Programming style of Polymorphism)</li>
<li>Trait object, dynamically dispatched. (Object-Oriented Programming style polymorphism)</li>
<li>Parametric Polymorphism menggunakan traits dan type parameter. (Functional Programming style polymorphism)</li>
</ul>
<p>Rust tidak memiliki method/function overloading, hal ini berkaitan dengan optimisasi yang berhubungan dengan penerapan generic. Instead, kita bisa menerapkan method/function overloading dengan cara generic/parametric polymorphism dengan trait dan associated types.</p>
<h2 id="polymorphism-menggunakan-trait-objectdyn-trait"><a class="header" href="#polymorphism-menggunakan-trait-objectdyn-trait">Polymorphism menggunakan trait object(<code>dyn Trait</code>)</a></h2>
<p>Polymorphism pada bahasa OOP umumnya merupakan dynamic polymorphism yang menggunakan <code>interface</code> untuk memasukkan object yang share common behaviours.
Rust menggunakan keyword <code>dyn</code> pada trait, untuk menandakan bahwa trait tersebut bisa menampung banyak tipe.</p>
<p>Apa yang membedakan generics dan trait object?</p>
<ul>
<li>generics di-resolve pada saat compile time, trait object di-resolve pada saat run-time.</li>
<li>generics hanya bisa memiliki 1 jenis tipe data pada satu waktu(saat definisi tipe), sedangkan trait object bisa memiliki banyak jenis tipe data pada satu waktu(saat definisi tipe).</li>
<li>generics bersifat zero cost, sedangkan trait object memiliki cost run-time vtable checking.</li>
</ul>
<p>Contoh:</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>use std::fmt::Debug;

// hanya bisa deklarasi i32 pada saat definisi tipe Vec&lt;T&gt; -&gt; Vec&lt;i32&gt;
let v = vec![1,2,3,4]; 

// hanya bisa deklarasi String pada saat definisi tipe Vec&lt;T&gt; -&gt; Vec&lt;String&gt;
let v: Vec&lt;String&gt; = vec![&quot;test&quot;.to_string(), &quot;test2&quot;.to_string()]; 


/// contoh penggunaan trait object untuk menampung berbagai tipe data pada saat definisi tipe.
pub trait Field: Debug {}
#[derive(Debug)]
pub struct Custom;

impl Field for i32 {}
impl Field for String {}
impl Field for &amp;str {}
impl Field for Custom {}

let mut v: Vec&lt;Box&lt;dyn Field&gt;&gt; = Vec::new();
v.push(Box::new(123));
v.push(Box::new(&quot;anu&quot;));
v.push(Box::new(String::from(&quot;nmnm&quot;)));
v.push(Box::new(Custom));

println!(&quot;{v:?}&quot;);
<span class="boring">}</span></code></pre></pre>
<h2 id="composition"><a class="header" href="#composition">Composition</a></h2>
<p>Kita bisa meng-elaborasi polymorphism di atas menjadi komposisi yang terdiri dari berbagai tipe object, object disini merupakan trait object.</p>
<p>Contoh: </p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>use std::fmt::Debug;

/// composition
///
///

// IDep merepresentasikan &quot;interface&quot; ke depedensi yang akan di-inject
pub trait IDep: Debug {}
pub trait Field: Debug {}
#[derive(Debug)]
pub struct Custom;

impl Field for i32 {}
impl Field for String {}
impl Field for &amp;str {}
impl Field for Custom {}

#[derive(Debug)]
pub struct Struct {
    field1: Box&lt;dyn IDep&gt;,
    field2: Vec&lt;Box&lt;dyn Field&gt;&gt;,
}

// Dep adalah object dependensi itu sendiri
#[derive(Debug)]
pub struct Dep;
impl IDep for Dep {}

impl Struct {
    pub fn new() -&gt; Self {
        let mut v: Vec&lt;Box&lt;dyn Field&gt;&gt; = Vec::new();
        v.push(Box::new(123));
        v.push(Box::new(&quot;anu&quot;));
        v.push(Box::new(String::from(&quot;nmnm&quot;)));
        v.push(Box::new(Custom));
        Self {
            field1: Box::new(Dep),
            field2: v,
        }
    }
}
<span class="boring">}</span></code></pre></pre>
<p>Rust memiliki pendekatan OOP yang berbeda dengan kebanyakan bahasa OOP, dimana tidak ada inheritance, dan kebanyakan variable adalah value, bukan object seperti di bahasa OOP. Beberapa pattern juga akan sangat berbeda jika diterapkan OOP dengan Rust. Trait object juga bisa di-inject ke dalam smart pointer jenis lain, sesuai kebutuhan. </p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../intermediate/5_smart_pointers.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next prefetch" href="../intermediate/7_subtyping.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../intermediate/5_smart_pointers.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next prefetch" href="../intermediate/7_subtyping.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="../elasticlunr.min.js"></script>
        <script src="../mark.min.js"></script>
        <script src="../searcher.js"></script>

        <script src="../clipboard.min.js"></script>
        <script src="../highlight.js"></script>
        <script src="../book.js"></script>

        <!-- Custom JS scripts -->


    </div>
    </body>
</html>
